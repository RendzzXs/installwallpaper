#!/bin/bash

# -------------------------------
# RENDZZ UNIQUE EDITION V2.0
# "Bukan Kotak Biasa!"
# -------------------------------

PTERO_DIR="/var/www/pterodactyl"
TARGET_FILE="$PTERO_DIR/resources/views/templates/base/core.blade.php"
FOOTER_FILE="$PTERO_DIR/resources/views/templates/base/footer.blade.php"
SERVER_FILE="$PTERO_DIR/resources/views/templates/base/server.blade.php"
DASHBOARD_FILE="$PTERO_DIR/resources/scripts/components/dashboard/DashboardContainer.tsx"
BACKUP_FILE="$PTERO_DIR/core.backup"
WALLPAPER_DIR="$PTERO_DIR/public/rendzz"
WALLPAPER_FILE="$WALLPAPER_DIR/bg.jpg"

# Warna Premium
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[0;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
BLACK='\033[0;30m'
ORANGE='\033[0;33m'
BOLD='\033[1m'
DIM='\033[2m'
BLINK='\033[5m'
REVERSE='\033[7m'
NC='\033[0m'

# Ikon
CHECK_MARK="\xE2\x9C\x85"
CROSS_MARK="\xE2\x9D\x8C"
ROCKET="\xF0\x9F\x9A\x80"
FIRE="\xF0\x9F\x94\xA5"
STAR="\xE2\xAD\x90"
DIAMOND="\xF0\x9F\x92\x8E"
LOCK="\xF0\x9F\x94\x92"
KEY="\xF0\x9F\x94\x91"
GLOBE="\xF0\x9F\x8C\x8D"
SPARKLES="\xE2\x9C\xA8"
WARNING="\xE2\x9A\xA0\xEF\xB8\x8F"
GEAR="\xE2\x9A\x99\xEF\xB8\x8F"
HEART="\xE2\x9D\xA4\xEF\xB8\x8F"

# -------------------------------
# FUNCTION: ANIMASI LOADING KEREN
# -------------------------------
show_loading() {
    local message=$1
    local pid=$2
    local spin=('â ‹' 'â ™' 'â ¹' 'â ¸' 'â ¼' 'â ´' 'â ¦' 'â §' 'â ‡' 'â ')
    local colors=($RED $ORANGE $YELLOW $GREEN $CYAN $BLUE $PURPLE)
    
    echo -ne "\n"
    while kill -0 $pid 2>/dev/null; do
        for i in "${spin[@]}"; do
            for color in "${colors[@]}"; do
                echo -ne "\r${color}${i}${NC} ${message}   "
                sleep 0.05
            done
        done
    done
    echo -ne "\r${GREEN}${CHECK_MARK}${NC} ${message} - ${GREEN}Done!${NC}  \n"
}

# -------------------------------
# FUNCTION: PROGRESS BAR
# -------------------------------
show_progress() {
    local duration=$1
    local message=$2
    local width=50
    local bar_char="â–ˆ"
    local empty_char="â–‘"
    
    echo -e "\n${CYAN}${GEAR} ${message}${NC}"
    echo -ne "${WHITE}[${NC}"
    
    for ((i=0; i<width; i++)); do
        echo -ne "${DIM}${empty_char}${NC}"
    done
    echo -ne "${WHITE}]${NC} 0%"
    echo -ne "\r${WHITE}[${NC}"
    
    for ((i=0; i<=width; i++)); do
        local percent=$((i * 100 / width))
        local color=$GREEN
        if [ $percent -lt 30 ]; then
            color=$RED
        elif [ $percent -lt 60 ]; then
            color=$YELLOW
        else
            color=$GREEN
        fi
        
        echo -ne "\r${WHITE}[${NC}"
        for ((j=0; j<i; j++)); do
            echo -ne "${color}${bar_char}${NC}"
        done
        for ((j=i; j<width; j++)); do
            echo -ne "${DIM}${empty_char}${NC}"
        done
        echo -ne "${WHITE}]${NC} ${color}${percent}%${NC}"
        sleep 0.02
    done
    echo -e "\n"
}

# -------------------------------
# FUNCTION: HEADER PREMIUM
# -------------------------------
show_header() {
    clear
    echo -e "${RED}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${RED}â•‘${WHITE}                                                                      ${RED}â•‘${NC}"
    echo -e "${RED}â•‘${WHITE}                      ${FIRE} RENDZZ UNIQUE EDITION ${FIRE}                       ${RED}â•‘${NC}"
    echo -e "${RED}â•‘${WHITE}                      ${CYAN}Version 2.0 - Premium                      ${RED}â•‘${NC}"
    echo -e "${RED}â•‘${WHITE}                      ${PURPLE}GA SUBREK GA KEREN!                        ${RED}â•‘${NC}"
    echo -e "${RED}â•‘${WHITE}                                                                      ${RED}â•‘${NC}"
    echo -e "${RED}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -e "${WHITE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${YELLOW}   ğŸ“¢ Subscribe: ${RED}Rendzz Official${NC} ${WHITE}|${NC} ${BLUE}ğŸ“± Telegram: @lynnn046${NC}"
    echo -e "${WHITE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo ""
}

# -------------------------------
# FUNCTION: SHOW THANKS
# -------------------------------
show_thanks() {
    echo -e "\n${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘${RED}                         ${HEART} SPECIAL THANKS ${HEART}                          ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
    echo -e "${WHITE}â•‘${GREEN}                                                                      ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${YELLOW}   âœ¦ 1. ${WHITE}ALLAH SWT - Segala puji bagi-Nya                        ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${YELLOW}   âœ¦ 2. ${WHITE}RENDZZ (Developer) - Sang pencipta                       ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${YELLOW}   âœ¦ 3. ${WHITE}Kedua Orang Tua tercinta                                ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${YELLOW}   âœ¦ 4. ${WHITE}AULIA - My Love â¤ï¸                                     ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘${GREEN}                                                                      ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
}

# -------------------------------
# FUNCTION: HAPUS WALLPAPER
# -------------------------------
uninstall_wallpaper() {
    show_header
    echo -e "${RED}${WARNING}  RESET PANEL - KEMBALI KE DEFAULT ${WARNING}${NC}\n"
    
    show_progress 3 "Preparing to reset panel..."
    
    # Hapus folder wallpaper
    if [ -d "$WALLPAPER_DIR" ]; then
        rm -rf "$WALLPAPER_DIR"
        echo -e "${GREEN}${CHECK_MARK} Folder wallpaper dihapus${NC}"
    fi
    
    # Kembalikan core.blade.php ke default
    cat > "$TARGET_FILE" << 'EOF'
@extends('templates/wrapper', [
    'css' => ['body' => 'bg-neutral-800'],
])

@section('container')
    <div id="modal-portal"></div>
    <div id="app"></div>
@endsection
EOF
    echo -e "${GREEN}${CHECK_MARK} Core file dikembalikan${NC}"
    
    # Kembalikan footer ke default
    if [ -f "$FOOTER_FILE" ]; then
        sed -i 's/Rendzz OfficialÂ®/PterodactylÂ®/g' "$FOOTER_FILE"
        sed -i 's/Â© 2025 - 2026/Â© 2015 - 2026/g' "$FOOTER_FILE"
        echo -e "${GREEN}${CHECK_MARK} Footer dikembalikan${NC}"
    fi
    
    # Clear cache
    cd "$PTERO_DIR" 2>/dev/null
    
    echo -e "\n${YELLOW}${GEAR} Clearing cache...${NC}"
    php artisan view:clear > /dev/null 2>&1
    php artisan cache:clear > /dev/null 2>&1
    
    echo -e "\n${GREEN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${GREEN}â•‘                      ${WHITE}${CHECK_MARK} RESET BERHASIL ${CHECK_MARK}                      ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${WHITE}Panel kembali ke tampilan default!${NC}"
}

# -------------------------------
# FUNCTION: INSTALL WALLPAPER + UNIQUE DESIGN
# -------------------------------
install_wallpaper() {
    show_header
    show_thanks
    
    # Input URL dengan style
    echo -e "${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘${YELLOW}                         ${GLOBE} INPUT WALLPAPER ${GLOBE}                         ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -e "${WHITE}Masukkan URL gambar untuk wallpaper:${NC}"
    echo -e "${DIM}Contoh: https://example.com/image.jpg${NC}"
    echo -ne "${GREEN}â¤ ${NC}"
    read WALLPAPER_URL
    
    # Validasi URL
    if [ -z "$WALLPAPER_URL" ]; then
        echo -e "\n${RED}${CROSS_MARK} URL tidak boleh kosong!${NC}"
        sleep 2
        return 1
    fi
    
    echo ""
    
    # Backup dengan animasi
    echo -e "${YELLOW}${GEAR} Membuat backup...${NC}"
    cp "$TARGET_FILE" "$BACKUP_FILE" 2>/dev/null
    sleep 0.5
    echo -e "${GREEN}${CHECK_MARK} Backup created: core.backup${NC}\n"
    
    # Download wallpaper dengan progress bar
    echo -e "${YELLOW}${GLOBE} Mendownload wallpaper...${NC}"
    mkdir -p "$WALLPAPER_DIR"
    
    # Simulasi download dengan progress
    (
        curl -L "$WALLPAPER_URL" -o "$WALLPAPER_FILE" --progress-bar > /dev/null 2>&1
    ) &
    show_loading "Downloading wallpaper" $!
    
    if [ ! -f "$WALLPAPER_FILE" ]; then
        echo -e "\n${RED}${CROSS_MARK} Gagal download wallpaper!${NC}"
        return 1
    fi
    
    chmod 644 "$WALLPAPER_FILE"
    chown -R www-data:www-data "$WALLPAPER_DIR" 2>/dev/null || \
    chown -R nginx:nginx "$WALLPAPER_DIR" 2>/dev/null
    
    echo -e "${GREEN}${CHECK_MARK} Wallpaper tersimpan di: ${WALLPAPER_FILE}${NC}\n"
    
    # -------------------------------
    # GANTI COPYRIGHT FOOTER
    # -------------------------------
    echo -e "${YELLOW}${KEY} Mengganti copyright footer...${NC}"
    
    cp "$FOOTER_FILE" "$FOOTER_FILE.bak" 2>/dev/null
    
    sed -i 's/PterodactylÂ®/Rendzz OfficialÂ®/g' "$FOOTER_FILE"
    sed -i 's/Pterodactyl/Rendzz Official/g' "$FOOTER_FILE"
    sed -i 's/Â© 2015 - 2026/Â© 2025 - 2026/g' "$FOOTER_FILE"
    sed -i 's/Â© [0-9]\{4\} - [0-9]\{4\}/Â© 2025 - 2026/g' "$FOOTER_FILE"
    
    echo -e "${GREEN}${CHECK_MARK} Footer: Rendzz OfficialÂ® Â© 2025 - 2026${NC}\n"
    
    # -------------------------------
    # INJECT CORE BLADE - UNIQUE DESIGN
    # -------------------------------
    echo -e "${YELLOW}${SPARKLES} Menginjeksi unique design...${NC}"
    
    # Simulasi proses inject
    show_progress 2 "Injecting custom CSS"
    
    cat > "$TARGET_FILE" << 'EOF'
@extends('templates/wrapper', [
    'css' => ['body' => 'bg-neutral-800'],
])

@section('container')
    <div id="modal-portal"></div>
    <div id="app"></div>

    <style>
        /* ======================================= */
        /*   RENDZZ UNIQUE EDITION V2.0           */
        /*   Premium Design - Bukan Kotak Biasa!  */
        /*   Copyright Â© 2025 Rendzz Official     */
        /* ======================================= */

        /* ANIMASI LOADING UNTUK PAGE */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 5px rgba(255,255,255,0.2); }
            50% { box-shadow: 0 0 20px rgba(78, 205, 196, 0.6); }
            100% { box-shadow: 0 0 5px rgba(255,255,255,0.2); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }

        @keyframes rotateGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* BACKGROUND DENGAN OVERLAY GRADIENT */
        body {
            background: url('/rendzz/bg.jpg') no-repeat center center fixed !important;
            background-size: cover !important;
            position: relative;
        }

        /* OVERLAY GRADIENT DINAMIS */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.3) 0%, 
                rgba(78, 205, 196, 0.15) 50%,
                rgba(0, 0, 0, 0.3) 100%);
            background-size: 200% 200%;
            animation: rotateGradient 10s ease infinite;
            pointer-events: none;
            z-index: 1;
        }

        #app, .content-wrapper, .main-sidebar, .main-header {
            position: relative;
            z-index: 2;
            animation: fadeInUp 0.8s ease-out;
        }

        /* ======================================= */
        /*   SERVER CARD - HEXAGON PREMIUM        */
        /* ======================================= */
        
        .card {
            background: rgba(255, 255, 255, 0.92) !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 25px 8px 25px 8px !important;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                inset 0 0 30px rgba(255, 255, 255, 0.2) !important;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
            animation: float 3s ease-in-out infinite !important;
            position: relative;
            overflow: hidden;
        }

        /* GARIS GRADIENT BERGERAK */
        .card::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                #ff6b6b, #4ecdc4, #556270, #ff6b6b);
            background-size: 300% 300%;
            animation: rotateGradient 5s ease infinite;
            border-radius: 25px 8px 25px 8px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 30px 45px rgba(0, 0, 0, 0.3) !important;
            background: rgba(255, 255, 255, 0.98) !important;
            animation: glowPulse 2s infinite !important;
        }

        /* CORNER DEKORASI */
        .card::after {
            content: "";
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-top: 3px solid #4ecdc4;
            border-right: 3px solid #4ecdc4;
            border-radius: 0 8px 0 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::after {
            opacity: 1;
        }

        .card-body {
            padding: 1.8rem !important;
        }

        .card-title {
            font-weight: 800 !important;
            color: #1a2634 !important;
            border-bottom: 2px solid transparent;
            border-image: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-image-slice: 1;
            padding-bottom: 12px;
            margin-bottom: 20px;
            letter-spacing: -0.5px;
        }

        /* ======================================= */
        /*   SIDEBAR - GLASS MORPHISM             */
        /* ======================================= */
        .main-sidebar {
            background: rgba(26, 32, 44, 0.75) !important;
            backdrop-filter: blur(15px) !important;
            border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.3) !important;
        }

        .nav-link {
            border-radius: 15px !important;
            margin: 8px 20px !important;
            padding: 12px 15px !important;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: "";
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s ease;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            background: rgba(78, 205, 196, 0.2) !important;
            transform: translateX(8px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
        }

        /* ======================================= */
        /*   NAVBAR - CLEAN GLASS                 */
        /* ======================================= */
        .main-header {
            background: rgba(255, 255, 255, 0.75) !important;
            backdrop-filter: blur(15px) !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3) !important;
        }

        .dark-mode .main-header {
            background: rgba(26, 32, 44, 0.75) !important;
        }

        /* ======================================= */
        /*   BUTTON - 3D EFFECT                   */
        /* ======================================= */
        .btn {
            border-radius: 50px !important;
            padding: 10px 25px !important;
            font-weight: 700 !important;
            letter-spacing: 0.5px !important;
            transition: all 0.3s ease !important;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transform: rotate(30deg);
            transition: transform 0.5s ease;
        }

        .btn:hover::after {
            transform: rotate(30deg) translate(50%, 50%);
        }

        .btn-primary {
            background: linear-gradient(145deg, #4ecdc4, #2c7a7b) !important;
            border: none !important;
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.4) !important;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(78, 205, 196, 0.6) !important;
        }

        .btn-primary:active {
            transform: translateY(2px) scale(0.98);
        }

        /* ======================================= */
        /*   MODAL - PREMIUM DESIGN               */
        /* ======================================= */
        .modal-content {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            border-radius: 40px 10px 40px 10px !important;
            border: 1px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4) !important;
        }

        .modal-header {
            border-bottom: 2px solid linear-gradient(90deg, #ff6b6b, #4ecdc4) !important;
            border-radius: 40px 10px 0 0 !important;
            background: linear-gradient(90deg, rgba(255,107,107,0.1), rgba(78,205,196,0.1));
        }

        .modal-footer {
            border-top: none !important;
        }

        /* ======================================= */
        /*   DARK MODE ENHANCED                   */
        /* ======================================= */
        .dark-mode .card {
            background: rgba(26, 32, 44, 0.85) !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        .dark-mode .card-title {
            color: #fff !important;
        }

        .dark-mode .modal-content {
            background: rgba(26, 32, 44, 0.95) !important;
        }

        /* ======================================= */
        /*   WATERMARK PREMIUM                     */
        /* ======================================= */
        body::before {
            content: "RENDZZ UNIQUE EDITION";
            position: fixed;
            bottom: 20px;
            right: 30px;
            color: rgba(255, 255, 255, 0.15);
            font-size: 24px;
            font-weight: 900;
            letter-spacing: 5px;
            z-index: 9999;
            pointer-events: none;
            text-shadow: 
                0 0 20px rgba(78, 205, 196, 0.5),
                0 0 40px rgba(255, 107, 107, 0.3);
            transform: rotate(-5deg);
            animation: float 4s ease-in-out infinite;
            white-space: nowrap;
        }

        /* SCROLLBAR PREMIUM */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff5252, #45b7aa);
        }

        /* SELECTION COLOR */
        ::selection {
            background: #4ecdc4;
            color: #fff;
        }
    </style>
@endsection
EOF

    # -------------------------------
    # GANTI TITLE PANEL
    # -------------------------------
    sed -i 's/<title>.*<\/title>/<title>ğŸ”¥ Rendzz Unique Edition Premium ğŸ”¥<\/title>/g' "$PTERO_DIR/resources/views/layouts/admin.blade.php" 2>/dev/null
    sed -i 's/<title>.*<\/title>/<title>ğŸ”¥ Rendzz Unique Edition Premium ğŸ”¥<\/title>/g' "$PTERO_DIR/resources/views/layouts/auth.blade.php" 2>/dev/null
    
    # -------------------------------
    # CLEAR CACHE
    # -------------------------------
    cd "$PTERO_DIR" 2>/dev/null
    
    echo -e "\n${YELLOW}${GEAR} Membersihkan cache...${NC}"
    php artisan view:clear > /dev/null 2>&1 &
    show_loading "Clearing view cache" $!
    
    php artisan cache:clear > /dev/null 2>&1 &
    show_loading "Clearing application cache" $!
    
    php artisan config:clear > /dev/null 2>&1 &
    show_loading "Clearing config cache" $!
    
    # -------------------------------
    # SUCCESS MESSAGE PREMIUM
    # -------------------------------
    echo -e "\n${GREEN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${GREEN}â•‘${WHITE}              ${SPARKLES} INSTALLASI PREMIUM BERHASIL ${SPARKLES}               ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
    echo -e "${GREEN}â•‘                                                                        â•‘${NC}"
    echo -e "${GREEN}â•‘  ${CYAN}ğŸ–¼ï¸  Wallpaper    :${WHITE} Custom URL                                     ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${PURPLE}ğŸƒ Card Style    :${WHITE} Hexagon Premium + Glass Morphism               ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${BLUE}ğŸ¬ Animasi       :${WHITE} Fade In Up, Float, Glow Pulse                   ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${YELLOW}âšª Button        :${WHITE} 3D Effect + Gradient                            ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${RED}ğŸ’§ Sidebar       :${WHITE} Glass Morphism (Blur 15px)                       ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${ORANGE}Â©ï¸  Footer        :${WHITE} Rendzz OfficialÂ® Â© 2025-2026                   ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘  ${PURPLE}ğŸ’§ Watermark     :${WHITE} RENDZZ UNIQUE EDITION (Floating)               ${GREEN}â•‘${NC}"
    echo -e "${GREEN}â•‘                                                                        â•‘${NC}"
    echo -e "${GREEN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -e "${WHITE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${GREEN}ğŸš€ ${WHITE}Refresh browser dengan ${YELLOW}CTRL+SHIFT+R${WHITE} untuk melihat perubahan!${NC}"
    echo -e "${WHITE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo ""
    echo -e "${HEART} ${RED}Terima kasih telah menggunakan Rendzz Unique Edition!${NC} ${HEART}"
}

# -------------------------------
# FUNCTION: SHOW CREDITS
# -------------------------------
show_credits() {
    echo -e "\n${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${WHITE}                      CREDITS & THANKS TO                         ${NC}"
    echo -e "${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${WHITE}                                                                    ${NC}"
    echo -e "${RED}          â¤ï¸ 1. ALLAH SWT - Atas segala rahmat-Nya â¤ï¸              ${NC}"
    echo -e "${GREEN}          âœ¨ 2. RENDZZ (Developer) - Kreator script ini âœ¨         ${NC}"
    echo -e "${YELLOW}          ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ 3. Kedua Orang Tua - Doa dan dukungan              ${NC}"
    echo -e "${PURPLE}          ğŸ’• 4. AULIA - Cewekku tersayang ğŸ’•                     ${NC}"
    echo -e "${WHITE}                                                                    ${NC}"
    echo -e "${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo -e "${BLUE}                      ğŸ”¥ RENDZZ UNIQUE EDITION ğŸ”¥                   ${NC}"
    echo -e "${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    sleep 3
}

# -------------------------------
# MAIN MENU PREMIUM
# -------------------------------
while true; do
    show_header
    
    # Tampilkan credits sekali di awal
    if [[ ! -f "/tmp/rendzz_credits_shown" ]]; then
        show_credits
        touch "/tmp/rendzz_credits_shown"
    fi
    
    echo -e "${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘                         ${YELLOW}ğŸ“‹ MENU UTAMA ğŸ“‹                         ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
    echo -e "${WHITE}â•‘                                                                        â•‘${NC}"
    echo -e "${WHITE}â•‘  ${RED}[1]${NC} ğŸ—‘ï¸  ${WHITE}HAPUS DESIGN     ${DIM}- Kembalikan ke default                   ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[2]${NC} âœ¨ ${WHITE}INSTALL DESIGN   ${DIM}- Pasang Unique Edition Premium         ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${BLUE}[3]${NC} ğŸ“¢ ${WHITE}SHOW CREDITS    ${DIM}- Tampilkan ucapan terima kasih         ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${PURPLE}[x]${NC} âŒ ${WHITE}KELUAR          ${DIM}- Exit dari script                     ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘                                                                        â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -ne "${YELLOW}â¤ Pilih menu [1/2/3/x]${NC}: ${GREEN}"
    read MENU
    echo -e "${NC}"
    
    case $MENU in
        1)
            uninstall_wallpaper
            echo ""
            echo -ne "${CYAN}Tekan Enter untuk kembali ke menu...${NC}"
            read
            ;;
        2)
            install_wallpaper
            echo ""
            echo -ne "${CYAN}Tekan Enter untuk kembali ke menu...${NC}"
            read
            ;;
        3)
            show_credits
            echo -ne "${CYAN}Tekan Enter untuk kembali ke menu...${NC}"
            read
            ;;
        x|X)
            echo -e "\n${GREEN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
            echo -e "${GREEN}â•‘${WHITE}              âœ¨ Terima kasih telah menggunakan script ini âœ¨              ${GREEN}â•‘${NC}"
            echo -e "${GREEN}â•‘${WHITE}                      ${RED}â¤ï¸ RENDZZ UNIQUE EDITION â¤ï¸                      ${GREEN}â•‘${NC}"
            echo -e "${GREEN}â•‘${WHITE}                 ${BLUE}ğŸ“± Telegram: @lynnn046 | Subscribe!                 ${GREEN}â•‘${NC}"
            echo -e "${GREEN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
            echo -e "\n${PURPLE}Jangan lupa subscribe channel Rendzz Official!${NC}"
            echo -e "${YELLOW}Sampai jumpa lagi! ğŸ‘‹${NC}\n"
            
            # Hapus temporary file
            rm -f "/tmp/rendzz_credits_shown"
            exit 0
            ;;
        *)
            echo -e "${RED}${CROSS_MARK} Pilihan tidak valid!${NC}"
            sleep 1
            ;;
    esac
done
